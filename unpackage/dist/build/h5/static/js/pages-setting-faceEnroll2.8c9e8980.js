(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-setting-faceEnroll2"],{"05e9":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uGap:n("248e").default,uButton:n("5e15").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"top-banner"},[i("v-uni-text",[t._v("员 工 之 家")])],1),i("v-uni-view",{staticClass:"content-box"},[i("v-uni-swiper",{staticClass:"swiper-login",attrs:{"indicator-dots":!1,"disable-touch":!0}},[i("v-uni-swiper-item",[i("v-uni-view",{staticClass:"swiper-item cv-login"},[i("v-uni-text",{staticClass:"cv-Login"},[t._v("人脸注册")]),i("v-uni-image",{staticClass:"face",attrs:{src:n("af2a")}}),i("u-gap",{attrs:{height:"380"}}),i("u-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choosePhoto.apply(void 0,arguments)}}},[t._v("开始注册")])],1)],1)],1)],1)],1)},a=[]},"0e22":function(t,e,n){"use strict";n("ace4"),n("d3b7"),n("ac1f"),n("466d"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{token:"",userInfo:{}}},onLoad:function(){this.token=uni.getStorageSync("token"),""==uni.getStorageSync("userInfo")&&uni.reLaunch({url:"../login/login"}),this.userInfo=uni.getStorageSync("userInfo")},mounted:function(){},methods:{choosePhoto:function(){var t=this;uni.chooseImage({count:1,sizeType:["compressed"],sourceType:["camera"],success:function(e){console.log("压缩前图片体积",e.tempFiles[0].size);var n=new FileReader;n.readAsDataURL(e.tempFiles[0]);var i=t;n.onload=function(){var t=this.result,e=new Image;e.src=t,e.onload=function(){i.compressEvent(e,(function(t){i.uploadImg(t)}))}}}}),uni.showLoading({title:"正在注册...",mask:!0})},compressEvent:function(t,e){var n=t.width,i=t.height,o=n/i;n>1024&&(n=1024,i=Math.floor(n/o));var a=document.createElement("canvas"),r=a.getContext("2d");a.width=n,a.height=i,r.drawImage(t,0,0,a.width,a.height);var s=a.toDataURL("image/jpeg",.3);e&&e(s)},dataURItoBlob:function(t){var e=t.split(","),n=e[0].match(/:(.*?);/)[1],i=atob(e[1]),o=i.length,a=new Uint8Array(o);while(o--)a[o]=i.charCodeAt(o);return new Blob([a],{type:n})},uploadImg:function(t){var e=this.dataURItoBlob(t);console.log("blob size: ",e.size),uni.uploadFile({url:"http://1.14.94.7/api/login/face-register?username="+this.userInfo.username,header:{Authorization:"Bearer "+this.token},filePath:t,name:"file",file:e,success:function(t){console.log(t),200==t.statusCode?(uni.showToast({title:"注册成功",icon:"success"}),setTimeout((function(){uni.switchTab({url:"../mine/minePage"})}),700)):uni.showToast({title:"注册失败，请重新尝试",icon:"none"})}})}}};e.default=i},5968:function(t,e,n){"use strict";n.r(e);var i=n("05e9"),o=n("b1aa");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("7849");var r,s=n("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"3d3128f6",null,!1,i["a"],r);e["default"]=c.exports},"64e3":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-3d3128f6]{background-color:#f1f1f1}uni-view[data-v-3d3128f6]{-webkit-box-sizing:border-box;box-sizing:border-box}.top-banner[data-v-3d3128f6]{width:100%;height:%?590?%;background-color:#404bd9;border-bottom-left-radius:%?30?%;border-bottom-right-radius:%?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;color:#fff;font-weight:700;font-size:%?60?%;-webkit-text-decoration:dotted;text-decoration:dotted}.content-box[data-v-3d3128f6]{width:%?640?%;height:%?740?%;background-color:#fff;position:absolute;top:%?420?%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);border-radius:%?15?%;font-weight:700}.swiper-login[data-v-3d3128f6]{width:100%;height:100%;position:relative}.cv-login[data-v-3d3128f6]{width:100%;height:100%;padding:%?45?% %?50?%}.cv-Login[data-v-3d3128f6]{font-size:%?40?%;font-weight:700;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.cv-login-box-tips[data-v-3d3128f6]{font-size:%?24?%}.cv-login-box[data-v-3d3128f6]{padding:0 %?30?%;color:#8c8c8c;margin-top:%?30?%}.phone-user-code[data-v-3d3128f6]{width:38%;margin-left:auto;margin-right:auto;letter-spacing:%?20?%;text-align:center}.user-pwd-input.input-user .input-line[data-v-3d3128f6]{width:100%;height:%?2?%;background-color:#00f;position:absolute;bottom:0;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);-webkit-transition:all .3s;transition:all .3s}.cv-notice[data-v-3d3128f6]{text-align:center}.face[data-v-3d3128f6]{width:100px;height:100px;position:absolute;left:35%;top:70px}body.?%PAGE?%[data-v-3d3128f6]{background-color:#f1f1f1}",""]),t.exports=e},7849:function(t,e,n){"use strict";var i=n("eb77"),o=n.n(i);o.a},af2a:function(t,e,n){t.exports=n.p+"static/img/face.52e152b0.png"},b1aa:function(t,e,n){"use strict";n.r(e);var i=n("0e22"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},eb77:function(t,e,n){var i=n("64e3");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("c5d802b4",i,!0,{sourceMap:!1,shadowMode:!1})}}]);